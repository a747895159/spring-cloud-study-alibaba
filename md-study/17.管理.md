# 1. 请介绍一个你负责项目，包括项目的目标、技术架构和遇到的主要挑战及解决方案。

![](https://img2024.cnblogs.com/blog/1694759/202410/1694759-20241011145036493-2046235739.png)

## 自我介绍：
您好，我是周彬，非常荣幸有机会参加贵公司的面试。
今年32岁，来自安徽阜阳，从事java行业11年多，具有4年的 WMS 经验和 支付系统项目经验，对三高、线上问题处理、系统稳定性、接口安全设计等有丰富的经验，带过8人团队。
当前在职于上海永辉超市，处于离职中。 在永辉超市主要负责WMS物流仓储系统建设，支持全国1000+门店与30多家物流中心仓库管理。高峰期日处理订单量1000w+笔。
主要职责业务需求评审与设计、人员管理与任务分配、需求迭代跟进；系统共性组件能力沉淀与设计、开发；系统稳定性建设(慢SQL与慢接口优化、服务治理、监控告警等)、大促稳定性保障；出入库核心业务开发。

## 项目介绍：
永辉 WMS 系统包含物流仓储WMS 系统和零售WMS系统，支撑1000+门店与30多个物流中心仓库管理与作业，日订单高峰近千万。
实现仓库作业的自动化、智能化、数字化，提高仓库运营效率、降低成本。主要功能包含出库管理、入库管理、库内管理、库存管理、任务管理、报表分析，基础资料管理模块。

## 技术架构：
- 采用SpringCloud搭建微服务架构，按业务与功能维度进行服务拆分涉及20多个微服务，使用Consul做注册中心，基于Feign方式声明式远程调用，
- 使用Redis集群(20主20从，每台5G)做分布式缓存与分布式锁，使用RocketMQ集群(八主八从)做消息队列，
- 使用Canal+BinLog+RocketMQ方式做数据异构 ，使用ES集群(三主八数据)做聚合报表与宽表数据查询。
- 使用Mycat做数据库分库，每个业务库都包含32分库。基于门店Id进行分片。
- 使用Apollo做配置中心，使用ElasticJob做分布式任务调度。
- 服务治理：使用基于ByteBuddy字节码开发的Captain插件，实现动态线程池、RocketMQ流控、基于Sentinel实现接口熔断降级与限流，基于Etcd的Watch机制实时生效。
- 监控告警：使用二开的Skywalking做链路追踪与JVM监控，并支持企业微信各类指标与自定义数据实时告警。


## 业务流程
零售WMS系统 承接门线上（永辉生活、外卖、小程序）、线下的toC订单 与 门店toB的采购出入库订单，仓内根据作业场景，需要收货、上架、出库分配、拣货、盘点、加工、清仓、任务调度、报损、补货、数据分析等操作。

## 拣货流程：

- 摘果法：1.每人每次只处理一份订单或一个客户；2.简单易操作。适用：品种少，订单量大。
- 播种法：1.每次处理多份订单进行集波，统一拣货到分拣区，然后进行分播处理。

线上交易OMS下单时，先在库存中心占用库存，下单后MQ通知WMS。
WMS落单后根据作业策略进行**库存分配**占用库存，然后生成**拣货**任务。
作业人员完成拣货任务后生成包裹并将库存移动到打包位，将结果通知库存中心与履约中心。
履约那边呼叫骑手进行配送，骑手取货后，结果通知WMS与交易OMS。wms发货扣除库存，交易OMS通知库存中心，进行出库扣掉占用库存。



## 遇到的挑战：
- 大数据量，分库分表升级改造方案
- B端微服务，复杂业务流程，分布式事务问题
- 报表类聚合查询问题，binlog消费问题
- 导入与导出OOM问题。





# 2.在项目中，如何确保代码质量和遵循最佳实践？

- **推荐阿里代码开发规范**：可以避免隐形开发bug、OOM事项、代码格式化、变量命名等规范。同时要求idea开发工具相关类的右侧检查提示尽量少。

- **系统框架规范培训**：介绍微服务各模块功能介绍、底层组件使用细节与规范，代码结构与写法规范。

- **代码审查**：每周周会间会或其他时间不定期进行代码审查，通过多人协作发现潜在问题，同时提升团队成员之间的知识共享和技能提升‌。

- **周会与分享**：每周组织各成员轮询进行相关分享，不限于新技术分享、业务知识细节分享、生活趣事等分享，提升团队融洽。同时一起讨论团队间规范流程，避免一言堂引起的不解与各种争执，同时也可以提升团队效率。



# 3.如何管理项目中的技术风险和应对突发的技术问题？

- 需求评审会，详细了解需求细节，会后开发人员确定相关实现方案。
- 需求排期，列入各开发、测试人员排期进度。
- 每日晨会沟通相关需求开发测试进度，遇到的风险点与阻塞点，及时拉通相关人员并讨论解决方案。

# 4.作为主管，如何激励和培养团队成员，提高他们的技术能力和工作效率？

- **建立绩效评估机制**，为团队各成员设立可衡量、可量化的目标，比如：需求提测时效、线上问题处理及时率、测试问题bug率、技术分享、**各类积极参与度、负责度 、态度** 等等。

- 对于技术能力强、积极负责的同事，也会给与一定的资源倾斜。比如：业务学习、技术学习与分享等提升方式。

- 沉淀运维问题解决文档，可以实现快速运维。同时针对核心、高频运维问题，沉淀专项治理问题并指定到人，分配一些挑战性任务，后续提供优化方案与分享。

- 定期组织进行业务、技术分享、代码审查分享，沉淀一些标准化组件框架与分享实现方案，减少同类踩坑问题，实现敏捷开发。

- 鼓励大家分享想法与反馈，讨论与完善团队流程规范。

- 定期组织团建活动，提升团队凝聚力与工作氛围。良好的团队氛围可以提升工作效率。



# 5.讲述一次团队成员之间出现严重分歧的情况，你是如何解决的？

- **识别问题根源**：是沟通不畅、还是资源分配等问题。
  - 如果是沟通不畅：可能是双方相互没get到点引发争执。这种一般看到群里成员间争执后，及时私聊沟通具体原因后，双方get到点后，就不要在继续针对讨论，容易上头产生隔阂。
  - 如果是资源问题：协调相关资源，拉通相关事项组，推动进度。

- **鼓励大家分享想法与反馈，达成团队成员间共识，讨论与完善团队流程规范。**
- 举例：晨会进度会议问题，个别同事不愿意参加。

# 6.如何制定团队的开发流程和规范，并确保团队成员严格遵守？

- 鼓励大家分享想法与反馈，讨论与完善团队流程规范。
- 需求排期跟踪表、项目发版计划表、日常线上运维问题表、专项治理问题表(业务流程优化事项、慢SQL、慢接口)、线上RCA问题处理记录、技术分享记录与文档；
- 上线前事项跟进、群内通知与抽查准备事项。**设立奖惩机制**，参与绩效评估，对于同类问题，多次同一个人发生，给与低绩效处理。




# 7.当面临时间紧迫和资源有限的情况，如何做出关键的技术决策？

- 1.确定优先级，识别出哪些功能是核心且必须实现的，哪些是可以妥协或延迟的。

- 2.简化功能与相关设计流程，去掉非核心特性，以确保核心功能的稳定性和可靠性。

- 3.根据团队人员现有的技能和经验，选择能够最大化利用这些资源的方案。资源评估不考虑加班事项

- 4.每日例会，跟踪进度，及时识别相关风险并解决。对于风险与突发状况，协调加班规划与申报。

- 5.定期拉通团队进度会议，评估风险与异常事项，确保团队内部以及与其他相关部门的沟通畅通 , 共同解决问题，保持团队的协同工作。

- 6.采用敏捷开发方法，通过短周期迭代方式来逐步完善产品。



# 8.描述一次在项目中出现严重性能问题的情况，你是如何分析和解决的？

- **问题**：YHDOS大盘期间inv-center，盘点异常，接口过慢，导致网关被拖挂(盘点高峰，业务请求量多，业务线程过慢，消耗全部网关Tomcat线程，容器健康检查无法拿到响应，导致3次，30s后服务被认为不健康的，下线重启)，YHDOS APP无法正常使用。前端APP超时错误提示，也没有正常提示，登录流程涉及多个接口校验。
- **事中告警检测**：盘点期间，收到慢接口告警，PC侧业务查询也都能正常使用。当时再排查慢接口原因，后续门店保障是YHDOS无法登录与使用。导致灭火环节偏差，线上问题处理时长被拉长了
- **解决方案**：
  - 1.inv-center接口慢主要是盘点高峰请求量过多，当时任务量总体比平时高了3倍，部分任务组下挂的数据量是原来的10倍，
  - 2.系统CPU较高 60%左右，GC比较频繁。
  - 3.当时线上灭火定位问题后，通过快速扩容，来分摊流量。
  - 4.事后分析，通过当时dump堆栈信息，发现任务对象很多; 对盘点流程梳理，发现代码存在数据多次查询问题进行优化，对任务组分组进一步细化限制，减少大任务组数据。
  - 5.网关侧调整熔断与超时时间；前端APP优化，登录流程接口权限校验瘦身处理。




# 9.在与其他部门（如产品、测试）协作时，如何确保需求理解准确和项目顺利推进？

- 1.明确需求中的问题事项，拉通相关产品、研发、测试确定产品逻辑及各部门职责内容，并推进产品编写详细需求文档
- 2.采用项目管理系统来跟踪任务进度(甘特图)、分配资源和记录问题。及时了解整体项目进度与瓶颈。
- 3.制定详细计划，包含时间表、里程碑、任务分配等，定时评估项目的风险，制定具体的缓解措施与应急计划。
- 4.定期会议，比如周会或者双周会，同步团队进展、讨论问题和协调资源。
- 5.日常沟通群里，相关跨部门小问题群聊、在线会议等方式及时沟通处理。



# 10.如何向上级领导汇报项目进展和技术问题？

举例：推仓。推仓前准备方案与拉通事项、推仓时问题记录沉淀与落实处理、推仓后复盘问题事项推进后续优化流程。

- 1.言简意赅，简要说明项目的整体目标和当前所处的阶段，突出汇报中的关键点和重要信息。
- 3.用具体的数据来支持你的汇报，避免模糊的表述。
- 3.概括当前面临的主要技术问题，制定如何推进与处理方案，定期落实进度。
- 4.积极态度处理挑战，认真倾听领导的意见和建议，并做出适当的回应。

# 11.线上问题处理步骤

**1分钟发现 - 5分钟定位 - 10分钟解决**

**问题发现-问题止血-问题分析-问题规避** 的闭环思路

- 1.**问题发现**：监控告警(JVM相关指标慢接口、CPU、YGC、FGC监控告警、核心链路中断告警、异常日志告警、MQ消息堆积告警、数据库与中间件组件告警)、灭火群报障。
- 2.**及时止血**：初步快速定位异常问题,快速处理。**重启、回滚、扩容、限流、降级。**
  - 1.数据库CPU飙高大量慢SQL，直接强制kill掉慢SQL。
  - 2.发版后引起部分业务功能异常，直接代码回滚。
  - 3.线上实例流量突发，引起CPU飙高或者YGC频繁，直接扩容。
  - 4.大数据量查询、导入导出等引起频繁GC，先直接扩容。
- 3.**问题分析**：通过链路追踪、日志、堆栈监控信息、结合业务流程分析问题原因，定位问题具体原因。
- 4.**问题规避**：编写RCA故障报告，进行复盘，罗列问题根因与制定优化方案，后续如何避免。

## 预防方案
- 1.日常工作：故障演练、链路压测、预留核心流程快速修复接口、制度建设(报备、值班、红线、奖惩等制度)、降级预案、链路各项指标分析与优化。
- 2.发版环节：发版前checklist、流程审批（代码变更审批、配置变更审批、数据库变更审批等）、灰度发布、发版后及时关注监控指标与流程验证。
- 3.规范培训：定期培训与完善相关规范流程，学习RCA故障相关事项，让全员始终保持一颗对线上的敬畏之心。

# 12.系统稳定性做哪些东西

- 1.开发环节：
  - 核心需求进行统一的设计与用例评审，核心流程告警机制与快速修复接口、接口支持幂等重试、降级方案、代码CR。
- 2.发版环节：
  - 发版前checklist、流程审批（代码变更审批、配置变更审批、数据库变更审批等）、灰度发布、发版后及时关注监控指标与流程验证。
- 3.监控告警机制：
  - 配置与精细化监控告警指标(系统指标告警、未知异常日志告警、关联字告警，核心链路告警)，P0级告警电话通知，第一时间处理。
- 4.稳定性治理：
  - 支持线程池动态调整、接口熔断降级与限流、MQ消息限流，快速定位线上问题，做到 1分钟发现 - 5分钟定位 - 10分钟解决。**重启、回滚、扩容、限流、降级。**
- 5.日常运维：
  - 每周CPU、接口TP99、GC等指标核对，沉淀一些专项治理优化(慢接口与慢Sql优化、数据归档、核心流程优化)；值班制度。
- 6.大销活动：
  - 促前(活动收集、压测、系统评估)、促中(系统指标分析、拉会跟踪、问题记录、及时扩容处理)、促后(问题复盘、沉淀改进事项)。
- 7.培训与制度：
  - 定期培训相关开发规范与线上故障处理流程、借鉴与学习线上RCA故障示例，建立**绩效评估机制**。
