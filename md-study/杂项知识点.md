
# 1、说说进程通信方式

进程通信是操作系统提供的一种机制，使得多个进程之间可以交换信息和数据。以下是几种常见的进程通信方式：

- **共享内存** ：共享内存是最常见的进程通信方式之一。它允许两个或多个进程共享同一块内存，这样它们就可以访问同一个数据。共享内存通常用于进程间通信，例如在同一个进程中的两个线程之间共享数据。
- **消息传递** ：消息传递是另一种进程通信方式，它允许进程之间交换消息。消息可以是任何类型的数据，包括数字、字符串、结构体等。消息传递通常用于进程间通信，例如在操作系统中的进程调度和同步中使用。
- **共享文件** ：共享文件是一种特殊类型的共享内存，它允许两个或多个进程共享同一个文件。共享文件通常用于文件传输和同步等操作。
- **管道** ：管道是一种特殊类型的共享内存，它允许一个进程将数据写入管道，而另一个进程可以从管道中读取数据。管道通常用于进程间通信，例如在命令行界面中使用管道来将命令和输出传递给其他进程。
- **信号量** ：信号量是一种特殊类型的变量，它允许一个进程在另一个进程中等待或响应。信号量通常用于进程间通信，例如在操作系统中使用信号量来实现进程同步和调度。

# 3、进程和线程的区别

进程(Process)是操作系统中正在运行的程序实例，每个进程都有自己的独立内存空间、系统资源和打开的文件等。进程之间相互隔离，一个进程的崩溃不会影响其他进程的运行。进程之间可以通过系统调用进行通信和协作。

线程(Thread)是进程中的一个执行单元，它与同一进程中的其他线程共享进程的内存空间和系统资源。多个线程可以同时执行，它们之间相互协作，共享数据和资源。由于线程共享进程的内存空间，因此线程之间的通信和同步比进程之间更加容易。

区别:
    - **内存空间** ：进程拥有独立的内存空间，而线程共享同一个进程的内存空间。
    - **资源占用** ：进程需要独立的系统资源来运行，如文件句柄、网络连接等，而线程可以共享这些资源。
    - **通信方式** ：进程之间通信需要通过系统调用进行，而线程之间可以通过共享变量或者消息传递等方式进行通信。
    - **创建和销毁开销** ：创建和销毁进程的开销比创建和销毁线程要大得多。
    

# 4.Nginx出现大量Time-WAIT链接耗尽如何处理。

keepalive 这个参数一定要小心设置，尤其对于QPS比较高的场景，推荐先做一下估算，根据QPS和平均响应时间大体能计算出需要的长连接的数量。

比如前面10000 QPS和100毫秒响应时间就可以推算出需要的长连接数量大概是1000. 然后将keepalive设置为这个长连接数量的10%到30%。比较懒的同学，可以直接设置为keepalive=1000之类的，一般都OK的了。

综上，出现大量`TIME_WAIT`的情况

1）导致 nginx端出现大量`TIME_WAIT`的情况有两种：

keepalive_requests设置比较小，高并发下超过此值后nginx会强制关闭和客户端保持的keepalive长连接；（主动关闭连接后导致nginx出现`TIME_WAIT`）

keepalive设置的比较小（空闲数太小），导致高并发下nginx会频繁出现连接数震荡（超过该值会关闭连接），不停的关闭、开启和后端server保持的keepalive长连接；

2）导致后端server端出现大量`TIME_WAIT`的情况：

nginx没有打开和后端的长连接，即：没有设置`proxy_http_version 1.1;`和`proxy_set_header Connection “”;`从而导致后端server每次关闭连接，高并发下就会出现server端出现大量`TIME_WAIT`
    

# 5.100Wqps短链系统如何设计？





